webpackJsonp([16],{Ct9n:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcBAMAAACAI8KnAAAAJ1BMVEUAAAAkLjUlMDYnMDcoMjkpPT0zMzsuR0cnMTcnMjklMjgkLzQtPDw8cWy+AAAADXRSTlMATURAJAwJByAbKjERZG4L/AAAAGxJREFUGNNjIAxSUXisgguQuZyCUijShoIOyNxiQRFkLjuadBGqNJuiYAMyP0lQAk16AjI/SFASxWVo0gsFDZB4LILCBUhcR0FzfJLqSDwOQaEEJG6joBpuyYmCqiihIRSAzN2IIsnAw0AcAABROA328KaOsQAAAABJRU5ErkJggg=="},FXQa:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("Xxa5"),a=s.n(n),i=s("exGp"),r=s.n(i),o=s("Dd8w"),c=s.n(o),u=s("W4IK"),l=s("Au9i"),f=s("7+uW"),p=s("L6bb"),v=s.n(p),_=s("mtWM"),d=s.n(_),h=s("NYxO");f.default.component(l.Picker.name,l.Picker),f.default.component(l.Radio.name,l.Radio),f.default.component(l.Popup.name,l.Popup),f.default.component(l.DatetimePicker.name,l.DatetimePicker);var m={data:function(){return{showpage:!0,popupVisible:!1,popupTimeVisible:!1,currentDate:new Date,startDate:new Date("1000"),endDate:new Date("3000"),supportWechat:!1,slots:[{flex:1,values:["男","女"],className:"slot1",textAlign:"center",itemHeight:10,defaultIndex:0,showToolbar:!0}]}},created:function(){},mounted:function(){this.supportWechat=this.isWechat()},computed:c()({},Object(h.c)(["userInfo"])),components:{Loading:function(t){return s.e(33).then(function(){var e=[s("voil")];t.apply(null,e)}.bind(this)).catch(s.oe)}},methods:c()({},Object(h.b)(["recordNewUserInfo"]),{gotoWeiXin:function(){window.location.href="https://www.foreader.com.cn/third_login/weixin_login"},unBindAcct:function(t){var e=this;return r()(a.a.mark(function s(){var n,i;return a.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e.showpage=!1,n=t,i=1,s.next=5,u.a.unBindAccount(n,i);case 5:s.sent&&e.getUserInfo();case 7:case"end":return s.stop()}},s,e)}))()},getUserInfo:function(){var t=this;return r()(a.a.mark(function e(){var s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.getUserInfo();case 2:s=e.sent,t.recordNewUserInfo(s),t.showpage=!0;case 5:case"end":return e.stop()}},e,t)}))()},goOut:function(){var t=this;return r()(a.a.mark(function e(){var s,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s=t.getLatestCookie("web_tk"))){e.next=4;break}return e.next=4,u.a.logOut(s);case 4:t.clearLoginInfo(),t.recordNewUserInfo({}),n=t.$router.resolve({path:"/home"}),window.location.replace(n.href);case 8:case"end":return e.stop()}},e,t)}))()},goToSaveInfo:function(t,e){this.$router.push("/save/"+t+"/"+e)},selectPopUp:function(t){var e=this;"time"==t?(this.popupTimeVisible=!0,this.popupTimeVisible=!0,this.$nextTick(function(){e.$refs.datePicker.open()})):this.popupVisible=!this.popupVisible},onValuesChange:function(t,e){if(this.popupVisible=!1,null!=this.userInfo&&this.userInfo.sex!=e[0]){var s={};s.sex="男"===e[0]?1:2,this.saveInfo(s)}},saveInfo:function(t){var e=this;return r()(a.a.mark(function s(){var n;return a.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return l.Indicator.open("加载中..."),s.prev=1,s.next=4,u.a.saveUserInfo(t);case 4:n=s.sent,e.isObjEmpty(n)||(e.recordNewUserInfo(n),l.Indicator.close()),s.next=11;break;case 8:s.prev=8,s.t0=s.catch(1),console.log(s.t0);case 11:case"end":return s.stop()}},s,e,[[1,8]])}))()},handleConfirm:function(t){if((new Date).valueOf()<t.valueOf())this.$toast("请选择小于当前时间");else{var e={};e.birthday=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),this.saveInfo(e)}},onChangeFile:function(){var t=this;l.Indicator.open("加载中...");var e=document.getElementById("userInfoFile");if(console.log(e.files[0]),!/\.(gif|jpg|jpeg|png|GIF|JPG|PNG)$/.test(e.value))return this.$toast("图片类型必须是.gif,jpeg,jpg,png中的一种"),l.Indicator.close(),!1;var s=this.getLatestCookie("id"),n=this.getLatestCookie("web_tk"),a={};if(null!=n){a={headers:{Authorization:"Bearer "+n}};var i=new FormData;i.append("avatar",new Blob([e.files[0]],{type:"image/png"}));var r=this.$route.query.channel?this.$route.query.channel:"30110",o=Date.now(),c=o+"&tdact8yoKDoIc5f44wM63bUIRyP1ye26",u="https://api.foreader.com.cn/users/"+s+"?channel="+r+"&timestamp="+o+"&sign="+v()(c);d.a.create().post(u,i,a).then(function(e){l.Indicator.close(),t.userInfo.avatar=e.data.avatar}).catch(function(e){l.Indicator.close(),t.$toast("出错了")})}}})},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"modify-userinfo"}},[t.showpage?s("div",[s("div",{staticClass:"hr user_hr"}),t._v(" "),s("div",{staticClass:"user-info user-avatar user-boder"},[s("div",{staticClass:"user-img"},[s("label",{attrs:{for:"userInfoFile"}},[s("span",{staticClass:"f_14"},[t._v("\n            头像\n          ")]),t._v(" "),s("div",[s("span",{staticClass:"user-avatar-main"},[s("span",{staticClass:"avatar line_0"},[s("img",{staticClass:"img_wh",attrs:{src:t.userInfo.avatar,alt:""}})]),t._v(" "),t._m(0)]),t._v(" "),s("input",{ref:"",staticStyle:{display:"none"},attrs:{type:"file",name:"avatar",id:"userInfoFile"},on:{change:function(e){return t.onChangeFile()}}})])])])]),t._v(" "),s("div",{staticClass:"user-info user-name user-boder",on:{click:function(e){return t.goToSaveInfo("name",t.userInfo.name)}}},[s("span",{staticClass:"f_14"},[t._v("\n          昵称\n         ")]),t._v(" "),s("span",{staticClass:"right f_13"},[s("span",{staticClass:"user-body c_263036_5"},[t._v(t._s(t.userInfo.name))]),t._v(" "),t._m(1)])]),t._v(" "),s("div",{staticClass:"hr user_hr"}),t._v(" "),s("div",{staticClass:"user-essential"},[s("div",{staticClass:"user-boder user-info"},[s("span",{staticClass:"f_14"},[t._v("\n          ID\n        ")]),t._v(" "),s("span",{staticClass:"right f_14"},[s("span",{staticClass:"c_263036_5"},[t._v(t._s(t.userInfo.id))])])]),t._v(" "),s("div",{staticClass:"user-info user-boder",on:{click:function(e){return t.selectPopUp("sex")}}},[s("span",{staticClass:"f_14 "},[t._v("\n          性别\n        ")]),t._v(" "),s("span",{staticClass:"right  f_14"},[s("span",{staticClass:" c_263036_5"},[t._v(t._s("1"==t.userInfo.sex?"男":"女"))]),t._v(" "),t._m(2)])]),t._v(" "),s("div",{staticClass:"user-info user-boder",on:{click:function(e){return t.selectPopUp("time")}}},[s("span",{staticClass:"f_14"},[t._v("\n            生日\n          ")]),t._v(" "),s("span",{staticClass:"right f_14"},[s("span",{staticClass:"c_263036_5"},[t._v(t._s(t.userInfo.birthday))]),t._v(" "),t._m(3)])]),t._v(" "),s("div",{staticClass:"hr user_hr"})]),t._v(" "),s("div",{staticClass:"user-boder user-info"},[s("span",{staticClass:"f_14"},[t._v("\n        手机号\n      ")]),t._v(" "),s("span",{staticClass:"right f_14"},[s("span",{staticClass:"c_263036_5"},[t._v(t._s(t.userInfo.mobile))])])]),t._v(" "),t.supportWechat?s("div",{staticClass:"user-info user-boder"},[s("span",{staticClass:"f_14"},[t._v("\n        微信\n      ")]),t._v(" "),s("span",{staticClass:"right f_14 user-other-bound"},[s("a",{attrs:{href:"javascript:;"},on:{click:t.gotoWeiXin}},[s("span",{directives:[{name:"show",rawName:"v-show",value:!t.userInfo.is_bind_weixin,expression:"!userInfo.is_bind_weixin"}],staticClass:"gobound-btn bound-btn"},[t._v("绑定")])]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:t.userInfo.is_bind_weixin,expression:"userInfo.is_bind_weixin"}],staticClass:"unbound-btn bound-btn",on:{click:function(e){return t.unBindAcct(1)}}},[t._v("解绑")])])]):t._e(),t._v(" "),s("div",{staticClass:"user-info user-boder"},[s("span",{staticClass:"f_14"},[t._v("\n        QQ\n      ")]),t._v(" "),s("span",{staticClass:"right f_14 user-other-bound"},[s("a",{attrs:{href:"https://www.foreader.com.cn/third_login/qq_login"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:!t.userInfo.is_bind_qq,expression:"!userInfo.is_bind_qq"}],staticClass:"gobound-btn bound-btn"},[t._v("绑定")])]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:t.userInfo.is_bind_qq,expression:"userInfo.is_bind_qq"}],staticClass:"unbound-btn bound-btn",on:{click:function(e){return t.unBindAcct(2)}}},[t._v("解绑")])])]),t._v(" "),s("div",{staticClass:"hr user_hr"}),t._v(" "),s("div",{staticClass:"logout-btn user-info user-boder",on:{click:t.goOut}},[s("span",{staticClass:"f_14 c_263036"},[t._v("退出登录")])])]):t._e(),t._v(" "),s("Loading",{attrs:{showLoading:!t.showpage}}),t._v(" "),s("mt-popup",{attrs:{position:"bottom"},model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[s("mt-picker",{attrs:{slots:t.slots},on:{change:t.onValuesChange}})],1),t._v(" "),t.startDate?s("mt-datetime-picker",{ref:"datePicker",attrs:{type:"date","year-format":"{value} 年","month-format":"{value} 月","date-format":"{value} 日",startDate:t.startDate,endDate:t.endDate},on:{confirm:t.handleConfirm,touchmove:function(t){t.preventDefault()}},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}}):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"arrow"},[e("img",{staticClass:"img_wh",attrs:{src:s("Ct9n")}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"arrow"},[e("img",{staticClass:"img_wh",attrs:{src:s("Ct9n")}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"arrow"},[e("img",{staticClass:"img_wh",attrs:{src:s("Ct9n")}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"arrow"},[e("img",{staticClass:"img_wh",attrs:{src:s("Ct9n")}})])}]};var b=s("VU/8")(m,g,!1,function(t){s("pEpT"),s("Iy1t")},"data-v-1a7b4f42",null);e.default=b.exports},Iy1t:function(t,e){},pEpT:function(t,e){}});