webpackJsonp([9,33],{"55jz":function(e,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=s("Dd8w"),r=s.n(t),n=s("Xxa5"),c=s.n(n),i=s("exGp"),o=s.n(i),l=s("W4IK"),p=s("voil"),h=s("Au9i"),u=s("NYxO"),d={components:{Loading:p.default},data:function(){return{walletBanlance:null,rechargeList:null,showpage:!1,rechargeId:"",url:"",supportAlipay:!1,toPay:!1,successPay:!1,wxPay:null}},created:function(){this.getRechargeRules(),h.Indicator.close(),this.supportAlipay=!this.isWechat(),this.$cookie.get("wxOrderId")&&(this.successPay=!0)},methods:{getRechargeRules:function(){var e=this;return o()(c.a.mark(function a(){return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,l.a.getWalletaBlance();case 3:return e.walletBanlance=a.sent,a.next=6,l.a.getRechargeRules();case 6:e.rechargeList=a.sent,e.rechargeId=e.rechargeList[0].recharge_face,e.showpage=!0,a.next=15;break;case 11:a.prev=11,a.t0=a.catch(0),e.showpage=!0,console.log(a.t0);case 15:case"end":return a.stop()}},a,e,[[0,11]])}))()},payByWechat:function(){var e=this;return o()(c.a.mark(function a(){var s,t,r;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return h.Indicator.open("加载中..."),a.prev=1,s=e.isWechat()?"WAPWX":"H5WEIXIN",t=e.rechargeId,a.next=6,l.a.rechargePay(s,t);case 6:r=a.sent,e.isWechat()?e.inWeChatClientPay(r):e.h5WechatPay(r),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),e.$toast("出错啦");case 13:h.Indicator.close();case 14:case"end":return a.stop()}},a,e,[[1,10]])}))()},payByAlipay:function(){var e=this;return o()(c.a.mark(function a(){var s,t,r;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return h.Indicator.open("加载中..."),a.prev=1,s="WAPALIPAY",t=e.rechargeId,a.next=6,l.a.rechargePay(s,t);case 6:r=a.sent,window.location.href=r.pay_url,a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),e.$toast("出错啦");case 13:h.Indicator.close();case 14:case"end":return a.stop()}},a,e,[[1,10]])}))()},h5WechatPay:function(e){var a=this;return o()(c.a.mark(function s(){return c.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:a.toPay=!0,a.wxPay=e.pay_url;case 2:case"end":return s.stop()}},s,a)}))()},inWeChatClientPay:function(e){var a=this;if(console.log(this),this.userInfo.is_bind_mpweixin){console.log("绑定微信",this.userInfo.is_bind_mpweixin);var s=e.pay_url,t=s.appId,r=s.timeStamp,n=s.nonceStr,c=(s.packages,s.paySign),i=s.signType;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t,timeStamp:r,nonceStr:n,package:e.pay_url.package,signType:i,paySign:c},function(e){console.log(e),"get_brand_wcpay_request:ok"==e.err_msg?(a.$toast("充值成功"),a.$router.go(-1)):"get_brand_wcpay_request:cancel"==e.err_msg?a.$toast("取消支付"):alert(e.err_msg)})}else h.MessageBox.confirm("是否登录微信?").then(function(e){window.location.href="https://www.foreader.com.cn/third_login/weixin_login"})},close:function(e){this.$cookie.delete("wxOrderId"),this[e]=!1},goWxPay:function(){this.$cookie.set("wxOrderId",Date.parse(new Date)),window.location.href=this.wxPay},completeWxPay:function(){this.close("successPay"),sessionStorage.getItem("url")?this.$router.push(sessionStorage.getItem("url")):this.$router.go(-1)}},computed:r()({},Object(u.c)(["userInfo"]))},g={render:function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("div",[e.showpage?s("div",{attrs:{id:"Recharge"}},[s("div",{staticClass:"recharge-header"},[s("span",[e._v("选择支付金额")]),s("span",{staticClass:"c80263036 right"},[e._v("余额: "+e._s(e.walletBanlance.primary_balance+e.walletBanlance.secondary_balance))])]),e._v(" "),s("div",{staticClass:"money-list"},[s("ul",e._l(e.rechargeList,function(a,t){return s("li",{key:t,staticClass:"money-list-item"},[s("label",{staticClass:"list_item_label"},[s("span",{staticClass:"item_label_main"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.rechargeId,expression:"rechargeId"}],staticClass:"racharg-radio",attrs:{type:"radio",name:"rechargeMoney"},domProps:{value:a.recharge_face,checked:e._q(e.rechargeId,a.recharge_face)},on:{change:function(s){e.rechargeId=a.recharge_face}}}),e._v(" "),s("span",{staticClass:"racharg-radio-core"}),e._v(" "),s("span",{staticClass:"f_14"},[e._v(e._s(a.recharge_face))]),e._v(" "),a.recharge_give>0?s("span",{staticClass:"primary_balance"},[e._v("赠"+e._s(a.recharge_give)+"币")]):e._e()]),e._v(" "),s("span",{staticClass:"right f_14"},[e._v(e._s(a.recharge_money)+"元")])])])}),0)]),e._v(" "),s("div",{attrs:{id:"recharge-btn-container"}},[e.supportAlipay?s("div",{staticClass:"recharge-btn recharge-btn-ali",on:{click:e.payByAlipay}},[e._m(0),e._v(" "),s("span",{attrs:{id:"payByAlipay"}},[e._v("\n            支付宝支付\n          ")])]):e._e(),e._v(" "),s("div",{staticClass:"recharge-btn recharge-btn-wechat",on:{click:e.payByWechat}},[e._m(1),e._v(" "),s("span",{attrs:{id:"payByWechat"}},[e._v("\n            微信支付  \n          ")])])])]):e._e(),e._v(" "),s("Loading",{attrs:{showLoading:!e.showpage}}),e._v(" "),[s("div",{directives:[{name:"show",rawName:"v-show",value:e.toPay,expression:"toPay"}],staticClass:"common-popup-wrap"},[s("div",{staticClass:"popup-wrap"},[s("p",{staticClass:"popup-wrap-content"},[e._v("\n          确认在手机微信中进行支付\n        ")]),e._v(" "),s("p",{staticClass:"popup-wrap-btn"},[s("span",{staticClass:"close",on:{click:function(a){return e.close("toPay")}}},[e._v("关闭")]),e._v(" "),s("span",{staticClass:"subimt",on:{click:e.goWxPay}},[e._v("确认")])])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.successPay,expression:"successPay"}],staticClass:"common-popup-wrap"},[s("div",{staticClass:"popup-wrap"},[s("p",{staticClass:"popup-wrap-success"},[e._v("\n          若你已完成支付，请点击“完成支付”；若没安装微信，请安装后再支付。\n        ")]),e._v(" "),s("p",{staticClass:"popup-wrap-btn"},[s("span",{staticClass:"close",on:{click:function(a){return e.close("successPay")}}},[e._v("关闭")]),e._v(" "),s("span",{staticClass:"subimt",on:{click:e.completeWxPay}},[e._v("完成支付")])])])])]],2)},staticRenderFns:[function(){var e=this.$createElement,a=this._self._c||e;return a("div",{staticClass:"recharge_btn_img"},[a("img",{staticClass:"img_wh",attrs:{src:s("Nlrc")}})])},function(){var e=this.$createElement,a=this._self._c||e;return a("div",{staticClass:"recharge_btn_img"},[a("img",{staticClass:"img_wh",attrs:{src:s("67hT")}})])}]};var v=s("VU/8")(d,g,!1,function(e){s("heo4")},"data-v-71d761a6",null);a.default=v.exports},"5qZd":function(e,a){},"67hT":function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAAAkFBMVEUAAABBsDVn0ldBsDVBsTVBsTVCsTZBsTVDtDdGtTlBsTZCsTZDszZEtDtCsTVCsTVBsTVBsTZCszZIukBBsTVBsTVBsTZCsTVCsjZDszZDsjdBsTVCsTZCsjZDsjZEszhLtD5BsTVBsTVCsTZCsTZGtThNtj9SvERCsTZCsjZCsjZCsTZCsDZEszlBsTVBsDUxSP/AAAAAL3RSTlMA/ATy+KyT4y8gvHg9HPXTzsJlD+zn3pxQRjfHcltLKhPXsouGFwwIgGxVpGAluX+snY0AAAJnSURBVFjD7dfZdqowFAbgH1AGQShCRRSnOmvb/f5vd1pXqCskwRDOzVmn35VeEOV3D4j/03gWFqOtlw+sfJqkRThb2+jsMBl6JMiHlw90kF0WpJRUB+jxi5haWW8RnlsPScPnHO2OLml6G6PFfEranAtU7L1FXaRjRTov1NGrNKnIoc4GSwhmAzIxQUNpkZl3cOYxGbIirj1fTY8ZcnnbIzLiuAE4IZmYVhl4gckPtrja9azYb9iroUE00U8sk5xc9ov1iSZKvusyMPlCXpg9QmHXFvc3nUrxZWk/Zs6+Djc+Ajh3jYax31/5Tmn2vKeO5gMPEXfdAhgT74JVrormYdwI1sqwFNv58KmKhjmehdYssWtuG3ypBm1bYym5+zNG4tlf/C3VYhZNbb6Q7gJsqWGEb6eijmbDr/GboiwgDhCfjUyPj+Z+PAtHNIXYsLe6UPzmlrh66raRHGQptoyfttWq5NZoB4lD0dpKORLJ18zQdAqdJ1MOsikbCrvq6SpPsZNtUJsPR2Oku7g+W1Yb19JalAFJJKjZld4mX7Mx0rRi56y2mhuF20VCn6w/SUmsmIBkShaOJl85/ONir7/G2Q34ZEaM9I16SuvtFFMvlg+mol7cR9UtqIfkhB8Hj4zFa26iD4wDmskfavs/1q7MTqogKB2D+3qHxMe281+IElLHjiU+3EDBfiF9zhJq+w4NP0aLm3Y1z9DGznWfsdEuIg25y3pCJ6L0MtmljqRukl1k4zk2BLYr9jQyKdKpxY7w0ltYZtByvF/kVDaXW3YIgs0JXZTfn+xu0NuVaOTjLzidV/j1L/gDONcop6RcVegAAAAASUVORK5CYII="},Nlrc:function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAAAmVBMVEUAAAAlrO4xtf8osO8lrO8prfErsPUmq+4lq+9S7v8lq+8lrO8ptPImrO8mrO8lrO8mrfAwtfElrO4lrO8lq+4lrO8lrO8mrO8mrfAmrPAmrfAlrO8mrO8osPMrs/U9w/8mrO4nrO8mrPAlq+4lrO8lrO8nrvElrO8lrO4mrO8mre8nrfAnre8lrO8mrO8mrO8lrO8mrPElq+5CBJjmAAAAMnRSTlMA0wos9yQd9PsDqqATzY3fYRDls4nv68CEdWdRPSkXB7ZNQ8e6ezWwmGtcVS/ayZOQSZeYo0wAAAKSSURBVFjD7ZfZlqIwEIZ/EZB961bZFNy3XvP+DzdHITRrwA7nzMXMdydHv6QqVRVBTmx9eAp5EsX7sGKU2Zrk15hbUFSLcGGpuedEODllJotwYz3yQ0bgnidzDJEJxGQUYpohXqzeyNLXDKUvNo8wmSBnRph46FnpZaBIAeEUUf6L/p5oJdRIqEioc2aKZAzmkymKpRpr5Mh19OdypHXn6B8WKWIZDtEKA/BGEr0N2VE07UZARsAU9aPQ8txzivbIMBROkYOMC+ETiS4ydpyiEzKkIXU023+F19stPHymdvNazrB6RYoWCfhBiA/pnBTs6ON5n0iX0GQaavkPN0Wq2aLFBh2o2y/75/JW39kir2iNxBVaNnb4RobDblpxCgDuVZ+I90/e3ooMtJHYbNHlPpZ1kZTZhS4aXAhTNFGB66xZgtpGRZXjec4S3YANacUL3Hpwt5fOXpsnkDpH4Nxfo4Zx+WgXaex/2+IWDVb+e4sogLrovwGaJTGpi65wGR5TQBdSsKuIIhjdnolBJ3XrOF872rwQOTQ0lkdakNOxvYeOgZaJfOCza7y6dOVHSS+7OjITLdF1/GeVnrhJMt5DoVukyMCNNFlEyJEnpaf+uk1EY4NT35NyNorTsauFpb91iETpvmpaGbqlObdp9tcyqnUhfZ48Agh22el5muOCovqkDbvahcWcpQsk0lGqfONokg5m52lTRE7th2F8lVudEWFpq9uWsn2dkR7sIDuSiv67kkAh0kQyAFE/UlHBQg9jWUCyXm38dEYGs7tCJKMgwh5HZGM5jmiJwziiA97GEU2BlNdBX+umCr9HeQzhkF8U4sErr8dHjiNy1aKDAllXfp0eXUYZw9H35uRJzFR36DT+A/9J7KQyCfHiAAAAAElFTkSuQmCC"},TvxE:function(e,a,s){e.exports=s.p+"static/img/fy_loading.f9e4c49.gif"},heo4:function(e,a){},voil:function(e,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t={props:{showLoading:{type:Boolean,default:!0}},data:function(){return{}}},r={render:function(){var e=this.$createElement,a=this._self._c||e;return this.showLoading?a("div",{staticClass:"loading-container"},[a("img",{attrs:{src:s("TvxE"),alt:""}})]):this._e()},staticRenderFns:[]};var n=s("VU/8")(t,r,!1,function(e){s("5qZd")},"data-v-ac3ec986",null);a.default=n.exports}});