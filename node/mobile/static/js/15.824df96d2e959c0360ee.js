webpackJsonp([15],{"5/oh":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG8AAABvBAMAAAAQ64NTAAAAJFBMVEUAAADcXFzdXFzeXFzdXFzdXFzdW1vdXFzdXFzdXFzdXFzcW1sD4wziAAAAC3RSTlMA5H+DhqWainRrki0KMzoAAAEWSURBVFjD5M+9CYNQAEVh4QZCypTpMkL6NOnTZISMYG/jCI7gCCL+u5zlLbR4HFB4ePuPw01u95A9kvWyOWTFGl6D4LiR/NLkJQgOOJmfIvmkyTqm5IsmG5z80GSPk+nxyZImp5iSf5rsTpFscfIXefK9b7LaekmhAPRLBAWgkwgKQCcRFIBOIigAnURQADqJoAB0EkEB6CSCAtBJBAWgkwgKQCcRFIBOIigAnURQADqJoAB0EkEB6CSCS+dyTAQADAMxzPcl0t38+YWDtWs1Yo2rEWtcjVjjasQaVyPW+GrEGlcj1rgascbViDWuRqxxNWKNqxFrXI1Y42rEGlcj1rgascbViDWuRqxxNWKNqxFrXI18qgNFzbmlu9GqRQAAAABJRU5ErkJggg=="},YA5s:function(t,e){},YBKI:function(t,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=c("Xxa5"),i=c.n(a),n=c("exGp"),s=c.n(n),r=c("7+uW"),o=c("W4IK"),u=c("Au9i");r.default.component(u.Checklist.name,u.Checklist);var l={data:function(){return{buyOption:[],restChapterBuyOption:0,curSelectIndex:0,curSelectedOption:"",accountBalance:0,autoBuySubscrible:[1],curPrice:0,originPrice:0,bid:this.$route.params.bid,cid:this.$route.params.cid}},mounted:function(){u.Indicator.open(),this.fetchBuyOptions()},methods:{goBack:function(){this.$router.go(-1)},selectOption:function(t,e){this.curSelectIndex=t,this.curSelectedOption=e,this.refreshPrice()},doPurchaseAndUpdateAutoBuy:function(){var t=this;return s()(i.a.mark(function e(){var c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u.Indicator.open(),c="",0!=t.curPrice){e.next=6;break}t.$toast("当前免费，无需购买"),e.next=15;break;case 6:if(!t.isObjEmpty(t.curSelectedOption)){e.next=12;break}return e.next=9,o.a.doPurchase(t.bid,t.cid,null,t.restChapterBuyOption,t.curPrice);case 9:c=e.sent,e.next=15;break;case 12:return e.next=14,o.a.doPurchase(t.bid,t.cid,t.curSelectedOption.id,null,t.curPrice);case 14:c=e.sent;case 15:if(!(t.autoBuySubscrible.length>0)){e.next=18;break}return e.next=18,o.a.updateAutoBuyState(t.bid,t.autoBuySubscrible[0]);case 18:c&&t.$router.push("/reading/"+t.$route.params.bid+"/"+t.$route.params.cid),u.Indicator.close();case 20:case"end":return e.stop()}},e,t)}))()},goToRechargePage:function(){this.$router.push({name:"Recharge"})},goReading:function(t,e){this.$router.replace({name:"reading",params:{bid:t,cid:e}})},refreshPrice:function(){var t=this;return s()(i.a.mark(function e(){var c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u.Indicator.open(),c="",!t.isObjEmpty(t.curSelectedOption)){e.next=8;break}return e.next=5,o.a.getBuyPrice(t.bid,t.cid,null,t.restChapterBuyOption);case 5:c=e.sent,e.next=11;break;case 8:return e.next=10,o.a.getBuyPrice(t.bid,t.cid,t.curSelectedOption.id);case 10:c=e.sent;case 11:null!=c.account_balance&&(t.originPrice=c.original_price,t.accountBalance=c.account_balance,t.curPrice=c.need_pay),u.Indicator.close();case 13:case"end":return e.stop()}},e,t)}))()},fetchBuyOptions:function(){var t=this;return s()(i.a.mark(function e(){var c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isLogin()){e.next=5;break}return e.next=3,o.a.getBuyOptions(t.bid,t.cid);case 3:(c=e.sent).chapter_shows?(t.buyOption=c.chapter_shows,t.restChapterBuyOption=c.all_rest,t.accountBalance=c.account_balance,t.curPrice=c.current_price,t.buyOption.length>0&&(t.curSelectedOption=t.buyOption[0])):t.$toast("出错啦");case 5:u.Indicator.close();case 6:case"end":return e.stop()}},e,t)}))()}},computed:{hasEnoughCoin:function(){return this.accountBalance>=this.curPrice}}},p={render:function(){var t=this,e=t.$createElement,c=t._self._c||e;return c("div",{attrs:{id:"Purchase"}},[c("div",{staticClass:"content-container"},[c("p",{staticClass:"pay-hint f_14"},[t._v("本章是付费章节")]),t._v(" "),c("div",{staticClass:"buy-options-container"},[t._l(t.buyOption,function(e,a){return c("div",{key:a,staticClass:"buy-option buy-option-noraml",class:{"selected-option":t.curSelectIndex==a,"selected-disable":!e.is_show},on:{click:function(c){return t.selectOption(a,e)}}},[c("p",{staticClass:"f_16"},0==a?[t._v("当前章节")]:[t._v("后续"+t._s(e.chapter_num)+"章")]),t._v(" "),1!=e.discount?c("div",{staticClass:"discount-container"},[t._m(0,!0),t._v(" "),c("span",{staticClass:"f_10"},[t._v(t._s(10*e.discount)+"折")])]):t._e()])}),t._v(" "),0!=t.restChapterBuyOption?c("div",{staticClass:"buy-option buy-option-full",class:{"selected-option":t.curSelectIndex==t.buyOption.length},on:{click:function(e){return t.selectOption(t.buyOption.length,null)}}},[c("p",{staticClass:"f_16"},[t._v("后续全部章节"+t._s(t.restChapterBuyOption)+"章")])]):t._e()],2),t._v(" "),c("p",{directives:[{name:"show",rawName:"v-show",value:!t.hasEnoughCoin,expression:"!hasEnoughCoin"}],staticClass:"balance-hint f_14"},[t._v("余额不足, 还差"),c("span",[t._v(t._s(t.curPrice-t.accountBalance))]),t._v("书币")]),t._v(" "),c("div",{staticClass:"subscible-auto-buy"},[c("mt-checklist",{attrs:{options:[{label:"自动购买下一张",value:1}]},model:{value:t.autoBuySubscrible,callback:function(e){t.autoBuySubscrible=e},expression:"autoBuySubscrible"}}),t._v(" "),t._m(1)],1)]),t._v(" "),c("div",{staticClass:"bg_white  bottom-container"},[c("div",{staticClass:"bottom-bar"},[c("p",{staticClass:"f_14"},[t._v("需支付："),c("span",{staticClass:"curPrice"},[t._v(t._s(t.curPrice)+"币")]),c("span",{directives:[{name:"show",rawName:"v-show",value:0!=t.originPrice,expression:"originPrice != 0"}],staticClass:"originPrice"},[t._v("(原价："+t._s(t.originPrice)+"币)")])]),t._v(" "),c("div",{staticClass:"btn-purchase"},[t.hasEnoughCoin?c("p",{staticClass:"f_14",on:{click:t.doPurchaseAndUpdateAutoBuy}},[t._v("立即购买")]):c("p",{staticClass:"f_14",on:{click:t.goToRechargePage}},[t._v("立即充值")])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"discount_img"},[e("img",{staticClass:"img_wh",attrs:{src:c("5/oh")}})])},function(){var t=this,e=t.$createElement,c=t._self._c||e;return c("div",{staticClass:"subscible-buy-title"},[c("h3",{staticClass:"f_14"},[t._v("温馨提示")]),t._v(" "),c("p",{staticClass:"f_12"},[t._v("1. 不足1000字免费")]),t._v(" "),c("p",{staticClass:"f_12"},[t._v("2. 5阅读币/1000字")]),t._v(" "),c("p",{staticClass:"f_12"},[t._v("3. 已购买章节不重复扣费")]),t._v(" "),c("p",{staticClass:"f_12"},[t._v("4. 批量购买是从当前章节算起(含当前章节)的未付费章节")])])}]};var d=c("VU/8")(l,p,!1,function(t){c("j+D4"),c("YA5s")},"data-v-6691a13d",null);e.default=d.exports},"j+D4":function(t,e){}});