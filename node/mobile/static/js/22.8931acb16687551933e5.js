webpackJsonp([22],{"XBy+":function(t,e){},ldD8:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("Xxa5"),a=n.n(o),i=n("exGp"),s=n.n(i),r=n("Dd8w"),c=n.n(r),m=n("W4IK"),u=n("Au9i"),l=n("NYxO");n("7+uW").default.use(u.InfiniteScroll);var d={data:function(){var t=this;return{showpage:!1,bid:this.$route.params.bid,offset:0,limit:10,type:this.$route.params.ind?1:0,commonList:[],loading:!1,isLoad:!1,nodata:!1,option:{deleteComment:function(e){t.deleteComment(e)},goCommentDetail:function(e){t.goCommentDetail(e)}}}},computed:c()({},Object(l.c)(["userInfo"])),components:{Loading:function(t){return n.e(33).then(function(){var e=[n("voil")];t.apply(null,e)}.bind(this)).catch(n.oe)},EmptyInterface:function(t){return n.e(34).then(function(){var e=[n("4/yX")];t.apply(null,e)}.bind(this)).catch(n.oe)},ElComments:function(t){return n.e(40).then(function(){var e=[n("6PtZ")];t.apply(null,e)}.bind(this)).catch(n.oe)},ElCommentInput:function(t){return n.e(43).then(function(){var e=[n("++Eb")];t.apply(null,e)}.bind(this)).catch(n.oe)},HeaderFix:function(t){return n.e(0).then(function(){var e=[n("plB5")];t.apply(null,e)}.bind(this)).catch(n.oe)}},methods:{loadMore:function(){this.loading=!0,this.isLoad=!0,this.getComments(this.commonList.length)},changeCommentType:function(t){var e=this;this.type=t,this.showpage=!1,this.commonList.length=0,this.scrollToTopSafely(),this.loading=!0,setTimeout(function(){e.getComments(0)},200)},addComment:function(t){var e=this;return s()(a.a.mark(function n(){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.showpage=!1,n.next=3,m.a.addComment(e.bid,t.content,t.parentid);case 3:e.commonList.length=0,e.getComments(0);case 5:case"end":return n.stop()}},n,e)}))()},goCommentDetail:function(t){var e=t.bid,n=t.id;this.$router.push("/commentdetail/"+e+"/"+n)},getComments:function(t){var e=this;return s()(a.a.mark(function n(){var o,i;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.nodata=!1,n.next=3,m.a.getCommentList(e.type,e.bid,t,e.limit);case 3:o=n.sent,e.showpage=!0;try{if(o.data!=[]&&o.data.length>0){for(i=0;i<o.data.length;i++)e.commonList.push(o.data[i]);e.loading=!1}else e.commonList.length==o.total&&e.commonList.length>0?e.$toast("暂无数据"):0==e.commonList.length&&(e.nodata=!0)}catch(t){e.nodata=!0,e.$toast("出错了")}case 6:case"end":return n.stop()}},n,e)}))()},deleteComment:function(t){var e=this;return s()(a.a.mark(function n(){var o,i;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.isLogin()){n.next=10;break}return o=e.bid,i=t.id,e.showpage=!1,n.next=6,m.a.deleteComment(o,i);case 6:e.commonList.length=0,e.getComments(0),n.next=11;break;case 10:e.$router.push("/login");case 11:case"end":return n.stop()}},n,e)}))()},goPersonalCenter:function(){this.isLogin()?this.$router.push({name:"PersonalCenter"}):this.$router.push("/login")}}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showpage,expression:"showpage"}],staticClass:"root",attrs:{id:"Comments"}},[n("HeaderFix",[n("span",{staticClass:"comment_type f_16 "},[n("a",{class:{is_active:1==t.type},attrs:{href:"javascript:;"},on:{click:function(e){return e.preventDefault(),t.changeCommentType(1)}}},[t._v("最热评论")]),t._v(" "),n("a",{class:{is_active:0==t.type},attrs:{href:"javascript:;"},on:{click:function(e){return e.preventDefault(),t.changeCommentType(0)}}},[t._v("最新评论")])])]),t._v(" "),n("div",{staticClass:"comments_list"},[t.nodata?n("div",{staticClass:"no_data"},[n("EmptyInterface",{attrs:{content:"暂无更多评论"}})],1):t._e(),t._v(" "),n("ElComments",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],attrs:{comments:t.commonList,needHeader:!1,userInfo:t.userInfo,option:t.option,"infinite-scroll-disabled":"loading","infinite-scroll-distance":"10"}})],1)],1),t._v(" "),n("Loading",{attrs:{showLoading:!t.showpage}}),t._v(" "),n("ElCommentInput",{attrs:{userInfo:t.userInfo},on:{addComment:t.addComment}})],1)},staticRenderFns:[]};var p=n("VU/8")(d,h,!1,function(t){n("XBy+")},"data-v-74037756",null);e.default=p.exports}});